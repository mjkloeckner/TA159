import{S as v,W as E,P as U,O as V,A as B,H as D,D as O,G as q,a as I,T as J,R as F,L as K,g as T,V as e,M as j,b as G,c as A,h as g}from"./OrbitControls-CgjfdclN.js";import{d as N,P as L}from"./durmientes-BJG45Nyc.js";import{m as Q}from"./BufferGeometryUtils-DQFymryo.js";import{t as X,r as Y,p as Z}from"./pasto-JkRKC7jR.js";let c,w,f,h,M,z;const u={tierra:{url:X,object:null},roca:{url:Y,object:null},pasto:{url:Z,object:null},durmientes:{url:N,object:null}};function R(){w.aspect=h.offsetWidth/h.offsetHeight,w.updateProjectionMatrix(),f.setSize(h.offsetWidth,h.offsetHeight)}function _(){c=new v,h=document.getElementById("mainContainer"),f=new E,f.setClearColor(6316128),h.appendChild(f.domElement),w=new U(35,window.innerWidth/window.innerHeight,.1,1e3),w.position.set(-10,15,-10),w.lookAt(0,0,0),new V(w,f.domElement);const n=new B(16777215);c.add(n);const t=new D(16777215,0,.25);c.add(t);const a=new O(16777215,1);a.position.set(100,100,100),c.add(a);const o=new q(50,20);c.add(o);const i=new I(5);c.add(i),window.addEventListener("resize",R),R()}function $(n,t){t.wrapS=t.wrapT=F,u[n].object=t,console.log("Texture `"+n+"` loaded")}function ee(n){const t=new K;t.onLoad=()=>{console.log("All textures loaded"),n()};for(const a in u){console.log("Loading textures");const o=new J(t),i=u[a];i.object=o.load(i.url,$.bind(this,a),null,r=>{console.error(r)})}}function te(n,t,a){const o=new g,i=new g,r=new g;let d=M.getPointAt(t),s=z.getPointAt(n);s.multiplyScalar(.5);let l=new e,p=new e,m=new e;l=M.getTangent(t),l.normalize(),p=new e(0,1,0),m.crossVectors(l,p),i.makeTranslation(d),o.identity(),r.identity(),r.makeTranslation(d),o.makeBasis(m,l,p),r.multiply(o),s.applyMatrix4(r);const x=s.x,y=s.y,P=s.z;a.set(x,y,P)}function ne(){z=new T([new e(-2,0,0),new e(-1,0,.5),new e(0,0,.55),new e(1,0,.5),new e(2,0,0)],!1);const n=new L(te,100,100);u.durmientes.object.wrapS=F,u.durmientes.object.wrapT=F,u.durmientes.object.repeat.set(1,60),u.durmientes.object.anisotropy=16;const t=new j({side:G,transparent:!1,opacity:1,shininess:10,map:u.durmientes.object}),a=new A(n,t);a.receiveShadow=!0,a.castShadow=!0,c.add(a)}function S(n,t){return function(o,i,r){const d=new g,s=new g,l=new g;new e;let p=M.getPointAt(i),m=new e(Math.cos(o*6.28)+t.x,t.y,Math.sin(o*6.28)+t.z);m.multiplyScalar(.1*b);let x=new e,y=new e,P=new e;x=M.getTangentAt(i),y=new e(0,1,0),P.crossVectors(x,y),s.makeTranslation(p),d.identity(),l.identity(),l.makeTranslation(p),d.makeBasis(P,x,y),l.multiply(d),m.applyMatrix4(l);const C=m.x,k=m.y,W=m.z;r.set(C,k,W)}}const b=.35;function ae(){let n=[];const t=S(b,new e(6,0,b+8)),a=S(b,new e(-6,0,b+8)),o=new L(t,100,500),i=new L(a,100,500);n.push(o),n.push(i);const r=new j({side:G,transparent:!1,opacity:1,shininess:10,color:16777215}),d=Q(n),s=new A(d,r);s.castShadow=!0,c.add(s)}function H(){requestAnimationFrame(H),f.render(c,w)}function oe(){M=new T([new e(-10,0,10),new e(10,0,10),new e(10,0,-10),new e(-10,0,-10)],!0),ne(),ae(),H()}_();ee(oe);
